# ğŸ—ï¸ é¡¹ç›®æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºè§†è§‰å—çš„PDFæ‰¹æ³¨ç³»ç»Ÿï¼Œé‡‡ç”¨ç°ä»£åŒ–çš„å…¨æ ˆWebåº”ç”¨æ¶æ„ã€‚é¡¹ç›®çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†ä¼ ç»Ÿçš„æ–‡æœ¬æ‰¹æ³¨æ–¹å¼æ‰©å±•åˆ°åŸºäºPDFå¸ƒå±€ç»“æ„çš„è§†è§‰å—æ‰¹æ³¨ã€‚

## ğŸ¯ è®¾è®¡ç†å¿µ

### æ ¸å¿ƒæ¦‚å¿µ

- **è§†è§‰å—ä¼˜å…ˆ**: ä»¥PDFçš„å®é™…å¸ƒå±€ç»“æ„ä¸ºåŸºç¡€ï¼Œè€Œéç®€å•çš„æ–‡æœ¬é€‰æ‹©
- **æ ‘å½¢ç»“æ„**: æ‰€æœ‰è§†è§‰å—ç»„æˆå±‚æ¬¡åŒ–çš„æ ‘å½¢ç»“æ„
- **åŒºåŸŸæ‰¹æ³¨**: æ‰¹æ³¨å¯¹è±¡æ˜¯ç”±å¤šä¸ªè§†è§‰å—ç»„æˆçš„åŒºåŸŸï¼Œè€Œéå•ä¸ªæ–‡æœ¬ç‰‡æ®µ
- **ç²¾ç¡®å¯¹ä½**: ä½¿ç”¨ç²¾ç¡®çš„åæ ‡è½¬æ¢ç¡®ä¿è§†è§‰å—ä¸PDFå†…å®¹å®Œç¾å¯¹é½

### æŠ€æœ¯å“²å­¦

1. **æ¸è¿›å¢å¼º**: ä»åŸºæœ¬çš„PDFæŸ¥çœ‹åŠŸèƒ½å¼€å§‹ï¼Œé€æ­¥å¢åŠ æ‰¹æ³¨åŠŸèƒ½
2. **ç»„ä»¶åŒ–**: é«˜åº¦æ¨¡å—åŒ–çš„ç»„ä»¶è®¾è®¡ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
3. **ç±»å‹å®‰å…¨**: å…¨é“¾è·¯TypeScriptï¼Œç¡®ä¿å¼€å‘å’Œè¿è¡Œæ—¶çš„ç±»å‹å®‰å…¨
4. **ç°ä»£åŒ–éƒ¨ç½²**: è®¾è®¡ä¸ºå¯æ— ç¼éƒ¨ç½²åˆ°ç°ä»£äº‘å¹³å°

## ğŸ›ï¸ æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Browser (Client)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Vue 3 Components                                       â”‚
â”‚  â”œâ”€â”€ VisualBlockAnnotator.vue (ä¸»è¦æ‰¹æ³¨ç»„ä»¶)            â”‚
â”‚  â”œâ”€â”€ PDFViewer (PDFæ¸²æŸ“)                               â”‚
â”‚  â””â”€â”€ AdminPanel (ç®¡ç†ç•Œé¢)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Nuxt 3 Framework                                       â”‚
â”‚  â”œâ”€â”€ Pages (è·¯ç”±é¡µé¢)                                   â”‚
â”‚  â”œâ”€â”€ Composables (å¯å¤ç”¨é€»è¾‘)                          â”‚
â”‚  â””â”€â”€ Utils (å·¥å…·å‡½æ•°)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Server API (Nitro)                                     â”‚
â”‚  â”œâ”€â”€ /api/blocks (è§†è§‰å—API)                           â”‚
â”‚  â”œâ”€â”€ /api/regions (åŒºåŸŸAPI)                            â”‚
â”‚  â””â”€â”€ /api/annotations (æ‰¹æ³¨API)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Database Layer                                          â”‚
â”‚  â”œâ”€â”€ Drizzle ORM (æŸ¥è¯¢æ„å»º)                            â”‚
â”‚  â”œâ”€â”€ LibSQL Client (æ•°æ®åº“è¿æ¥)                        â”‚
â”‚  â””â”€â”€ SQLite Database (æ•°æ®å­˜å‚¨)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  External Data Sources                                   â”‚
â”‚  â”œâ”€â”€ MinerU JSON (å¸ƒå±€æ•°æ®)                            â”‚
â”‚  â”œâ”€â”€ Original PDF (æ–‡æ¡£æ–‡ä»¶)                           â”‚
â”‚  â””â”€â”€ PDF.js Worker (PDFå¤„ç†)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ ç›®å½•ç»“æ„è¯¦è§£

```
box-selection/
â”œâ”€â”€ components/                 # Vueç»„ä»¶
â”‚   â””â”€â”€ VisualBlockAnnotator.vue    # ä¸»è¦æ‰¹æ³¨ç»„ä»¶
â”œâ”€â”€ pages/                     # è·¯ç”±é¡µé¢
â”‚   â”œâ”€â”€ index.vue                   # ä¸»é¡µ
â”‚   â”œâ”€â”€ annotator.vue               # æ‰¹æ³¨ç³»ç»Ÿ
â”‚   â”œâ”€â”€ admin.vue                   # ç®¡ç†é¡µé¢
â”‚   â””â”€â”€ read-all.vue                # PDFæŸ¥çœ‹å™¨
â”œâ”€â”€ server/                    # æœåŠ¡å™¨ç«¯ä»£ç 
â”‚   â””â”€â”€ api/                        # APIç«¯ç‚¹
â”‚       â”œâ”€â”€ blocks.get.ts           # è·å–è§†è§‰å—
â”‚       â”œâ”€â”€ init-db.post.ts         # åˆå§‹åŒ–æ•°æ®åº“
â”‚       â”œâ”€â”€ regions.post.ts         # åˆ›å»ºåŒºåŸŸ
â”‚       â””â”€â”€ annotations.post.ts     # åˆ›å»ºæ‰¹æ³¨
â”œâ”€â”€ db/                        # æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ schema.ts                   # æ•°æ®åº“æ¨¡å¼
â”‚   â”œâ”€â”€ index.ts                    # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ migrations/                 # è¿ç§»æ–‡ä»¶
â”‚   â””â”€â”€ sqlite.db                   # SQLiteæ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ utils/                     # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ pdf-parser.ts              # PDFæ•°æ®è§£æ
â”œâ”€â”€ docs/                      # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ database-setup.md          # æ•°æ®åº“é…ç½®æ–‡æ¡£
â”‚   â”œâ”€â”€ api-design.md              # APIè®¾è®¡æ–‡æ¡£
â”‚   â””â”€â”€ architecture.md            # æ¶æ„æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ public/                    # é™æ€èµ„æº
â”‚   â”œâ”€â”€ data/                      # PDFå’Œå¸ƒå±€æ•°æ®
â”‚   â”‚   â”œâ”€â”€ origin.pdf             # åŸå§‹PDFæ–‡ä»¶
â”‚   â”‚   â””â”€â”€ middle.json            # MinerUå¸ƒå±€æ•°æ®
â”‚   â””â”€â”€ pdf.worker.min.mjs         # PDF.js Worker
â””â”€â”€ drizzle.config.ts         # Drizzle ORMé…ç½®
```

## ğŸ”„ æ•°æ®æµç¨‹

### 1. æ•°æ®åˆå§‹åŒ–æµç¨‹

```mermaid
graph TD
    A[MinerUå¤„ç†PDF] --> B[ç”Ÿæˆmiddle.json]
    B --> C[è§£æä¸ºè§†è§‰å—æ•°æ®]
    C --> D[å­˜å‚¨åˆ°SQLiteæ•°æ®åº“]
    D --> E[å‰ç«¯è·å–è§†è§‰å—]
    E --> F[åœ¨PDFä¸Šæ¸²æŸ“è¦†ç›–å±‚]
```

### 2. ç”¨æˆ·äº¤äº’æµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·åŠ è½½PDF] --> B[æ˜¾ç¤ºè§†è§‰å—è¦†ç›–å±‚]
    B --> C[ç”¨æˆ·é€‰æ‹©è§†è§‰å—]
    C --> D{é€‰æ‹©æ–¹å¼}
    D -->|é¼ æ ‡æ¡†é€‰| E[è®¡ç®—ç›¸äº¤åŒºåŸŸ]
    D -->|é”®ç›˜å¯¼èˆª| F[Vimé£æ ¼å¯¼èˆª]
    E --> G[åˆ›å»ºåŒºåŸŸ]
    F --> G
    G --> H[æ·»åŠ æ‰¹æ³¨]
    H --> I[ä¿å­˜åˆ°æ•°æ®åº“]
```

### 3. åæ ‡è½¬æ¢æµç¨‹

```mermaid
graph LR
    A[PDFåŸå§‹åæ ‡] --> B[è·å–é¡µé¢å°ºå¯¸]
    B --> C[è®¡ç®—ç¼©æ”¾æ¯”ä¾‹]
    C --> D[åº”ç”¨å±…ä¸­åç§»]
    D --> E[è½¬æ¢ä¸ºæ˜¾ç¤ºåæ ‡]
    E --> F[æ¸²æŸ“è§†è§‰å—]
```

## ğŸ§© æ ¸å¿ƒç»„ä»¶è®¾è®¡

### VisualBlockAnnotator.vue

è¿™æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£æ•´åˆPDFæ¸²æŸ“ã€è§†è§‰å—æ˜¾ç¤ºå’Œç”¨æˆ·äº¤äº’ã€‚

```typescript
// ä¸»è¦èŒè´£
interface VisualBlockAnnotator {
  // PDF æ¸²æŸ“
  loadPdf(): Promise<void>
  renderPage(pageNum: number): Promise<void>
  
  // åæ ‡è½¬æ¢
  convertCoordinates(bbox: Bbox): DisplayCoords | null
  updateOverlayDimensions(): void
  
  // ç”¨æˆ·äº¤äº’
  handleMouseSelection(event: MouseEvent): void
  handleKeyboardNavigation(event: KeyboardEvent): void
  
  // åŒºåŸŸç®¡ç†
  createRegion(blockIds: number[]): void
  deleteRegion(regionId: number): void
  
  // æ‰¹æ³¨ç®¡ç†
  updateAnnotation(regionId: number, content: string): void
}
```

### PDFåæ ‡è½¬æ¢ç³»ç»Ÿ

åæ ‡è½¬æ¢æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒæŠ€æœ¯éš¾ç‚¹ï¼Œç¡®ä¿è§†è§‰å—ä¸PDFå†…å®¹ç²¾ç¡®å¯¹é½ã€‚

```typescript
// åæ ‡è½¬æ¢ç®—æ³•
function convertCoordinates(bbox: Bbox): DisplayCoords {
  // 1. è·å–é¡µé¢åŸå§‹å°ºå¯¸
  const [pageWidth, pageHeight] = getCurrentPageSize()
  
  // 2. è®¡ç®—ç¼©æ”¾æ¯”ä¾‹ï¼ˆä¿æŒå®½é«˜æ¯”ï¼‰
  const scaleX = canvasWidth / pageWidth
  const scaleY = canvasHeight / pageHeight
  const scale = Math.min(scaleX, scaleY)
  
  // 3. è®¡ç®—å®é™…æ¸²æŸ“å°ºå¯¸
  const renderWidth = pageWidth * scale
  const renderHeight = pageHeight * scale
  
  // 4. è®¡ç®—å±…ä¸­åç§»
  const centerOffsetX = (canvasWidth - renderWidth) / 2
  const centerOffsetY = (canvasHeight - renderHeight) / 2
  
  // 5. åº”ç”¨å˜æ¢
  return {
    left: bbox.x * scale + offsetX + centerOffsetX,
    top: bbox.y * scale + offsetY + centerOffsetY,
    width: bbox.width * scale,
    height: bbox.height * scale
  }
}
```

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### è¡¨å…³ç³»å›¾

```mermaid
erDiagram
    visual_blocks ||--o{ region_blocks : contains
    regions ||--o{ region_blocks : includes
    regions ||--o{ annotations : has
    visual_blocks ||--o{ visual_blocks : parent_child
    
    visual_blocks {
        int id PK
        int page_index
        int block_index
        string type
        string bbox
        string content
        int level
        int parent_id FK
        int created_at
        int updated_at
    }
    
    regions {
        int id PK
        string name
        int root_block_id FK
        string bbox
        int created_at
        int updated_at
    }
    
    region_blocks {
        int region_id FK
        int block_id FK
    }
    
    annotations {
        int id PK
        int region_id FK
        string content
        string type
        string position
        int is_visible
        int created_at
        int updated_at
    }
```

### æ•°æ®ä¸€è‡´æ€§ä¿è¯

1. **äº‹åŠ¡å¤„ç†**: åŒºåŸŸåˆ›å»ºå’Œå—å…³è”åœ¨åŒä¸€äº‹åŠ¡ä¸­å®Œæˆ
2. **å¤–é”®çº¦æŸ**: ç¡®ä¿å¼•ç”¨å®Œæ•´æ€§
3. **ç´¢å¼•ä¼˜åŒ–**: ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
4. **æ•°æ®éªŒè¯**: APIå±‚å’Œæ•°æ®åº“å±‚åŒé‡éªŒè¯

## ğŸ”§ æŠ€æœ¯é€‰å‹è¯´æ˜

### å‰ç«¯æŠ€æœ¯æ ˆ

- **Nuxt 3**: 
  - ä¼˜åŠ¿: å…¨æ ˆæ¡†æ¶ï¼ŒSSR/SPAæ”¯æŒï¼Œä¼˜ç§€çš„å¼€å‘ä½“éªŒ
  - é€‰æ‹©åŸå› : ç®€åŒ–å¼€å‘æµç¨‹ï¼Œå†…ç½®APIæ”¯æŒï¼Œéƒ¨ç½²å‹å¥½
  
- **Vue 3 + TypeScript**:
  - ä¼˜åŠ¿: å“åº”å¼ç³»ç»Ÿï¼Œç»„åˆå¼APIï¼Œå®Œæ•´çš„ç±»å‹æ”¯æŒ
  - é€‰æ‹©åŸå› : å¼€å‘æ•ˆç‡é«˜ï¼Œç»´æŠ¤æ€§å¼ºï¼Œç”Ÿæ€ä¸°å¯Œ

- **PDF.js**:
  - ä¼˜åŠ¿: åŸç”ŸPDFæ¸²æŸ“ï¼Œè·¨å¹³å°å…¼å®¹ï¼ŒåŠŸèƒ½å®Œæ•´
  - é€‰æ‹©åŸå› : æ— éœ€æ’ä»¶ï¼Œæ¸²æŸ“è´¨é‡é«˜ï¼Œå¯å®šåˆ¶æ€§å¼º

### åç«¯æŠ€æœ¯æ ˆ

- **Nuxt Nitro**:
  - ä¼˜åŠ¿: ç»Ÿä¸€çš„å…¨æ ˆå¼€å‘ä½“éªŒï¼Œè‡ªåŠ¨APIè·¯ç”±ï¼Œéƒ¨ç½²ä¼˜åŒ–
  - é€‰æ‹©åŸå› : ä¸å‰ç«¯é›†æˆæ— ç¼ï¼Œå¼€å‘æ•ˆç‡é«˜

- **SQLite + LibSQL**:
  - ä¼˜åŠ¿: é›¶é…ç½®ï¼Œæ–‡ä»¶æ•°æ®åº“ï¼Œé«˜æ€§èƒ½ï¼Œäº‹åŠ¡æ”¯æŒ
  - é€‰æ‹©åŸå› : ç®€åŒ–éƒ¨ç½²ï¼Œé€‚åˆä¸­å°å‹åº”ç”¨ï¼Œäº‘éƒ¨ç½²å‹å¥½

- **Drizzle ORM**:
  - ä¼˜åŠ¿: ç±»å‹å®‰å…¨ï¼ŒSQL-like APIï¼Œè¿ç§»ç®¡ç†ï¼Œæ€§èƒ½ä¼˜ç§€
  - é€‰æ‹©åŸå› : ç°ä»£åŒ–ORMï¼ŒTypeScriptä¼˜å…ˆï¼Œå­¦ä¹ æˆæœ¬ä½

## ğŸš€ éƒ¨ç½²æ¶æ„

### å¼€å‘ç¯å¢ƒ

```
Developer Machine
â”œâ”€â”€ Node.js 22.x
â”œâ”€â”€ pnpm (åŒ…ç®¡ç†)
â”œâ”€â”€ SQLite (æœ¬åœ°æ•°æ®åº“)
â””â”€â”€ PDF.js Worker (æœ¬åœ°æ–‡ä»¶)
```

### ç”Ÿäº§ç¯å¢ƒ (Cloudflare Pages)

```
Cloudflare Edge Network
â”œâ”€â”€ Static Assets (CDN)
â”œâ”€â”€ Nuxt Application (Edge Functions)
â”œâ”€â”€ Turso Database (åˆ†å¸ƒå¼SQLite)
â””â”€â”€ Environment Variables (é…ç½®ç®¡ç†)
```

### éƒ¨ç½²æµç¨‹

```mermaid
graph LR
    A[ä»£ç æäº¤] --> B[GitHub Actions]
    B --> C[æ„å»ºåº”ç”¨]
    C --> D[è¿è¡Œæµ‹è¯•]
    D --> E[éƒ¨ç½²åˆ°Cloudflare]
    E --> F[æ•°æ®åº“è¿ç§»]
    F --> G[å¥åº·æ£€æŸ¥]
```

## ğŸ”’ å®‰å…¨è€ƒè™‘

### æ•°æ®å®‰å…¨

1. **è¾“å…¥éªŒè¯**: æ‰€æœ‰ç”¨æˆ·è¾“å…¥éƒ½ç»è¿‡éªŒè¯å’Œæ¸…ç†
2. **SQLæ³¨å…¥é˜²æŠ¤**: ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
3. **æ–‡ä»¶è®¿é—®æ§åˆ¶**: é™åˆ¶PDFæ–‡ä»¶è®¿é—®æƒé™
4. **æ•°æ®åº“å¤‡ä»½**: å®šæœŸå¤‡ä»½é‡è¦æ•°æ®

### è®¿é—®æ§åˆ¶

```typescript
// æœªæ¥æ‰©å±•ï¼šè®¤è¯ä¸­é—´ä»¶
export default defineEventHandler(async (event) => {
  if (event.node.req.url?.startsWith('/api/admin')) {
    // éªŒè¯ç®¡ç†å‘˜æƒé™
    const isAdmin = await verifyAdminToken(event)
    if (!isAdmin) {
      throw createError({ statusCode: 403, statusMessage: 'Forbidden' })
    }
  }
})
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### å‰ç«¯ä¼˜åŒ–

1. **æ‡’åŠ è½½**: ç»„ä»¶å’Œè·¯ç”±æ‡’åŠ è½½
2. **è™šæ‹Ÿæ»šåŠ¨**: å¤§é‡è§†è§‰å—çš„æ€§èƒ½ä¼˜åŒ–
3. **ç¼“å­˜ç­–ç•¥**: APIå“åº”ç¼“å­˜
4. **å›¾åƒä¼˜åŒ–**: PDFæ¸²æŸ“ä¼˜åŒ–

### åç«¯ä¼˜åŒ–

1. **æ•°æ®åº“ç´¢å¼•**: ä¸ºå¸¸ç”¨æŸ¥è¯¢æ·»åŠ ç´¢å¼•
2. **è¿æ¥æ± **: æ•°æ®åº“è¿æ¥ä¼˜åŒ–
3. **æŸ¥è¯¢ä¼˜åŒ–**: é¿å…N+1æŸ¥è¯¢é—®é¢˜
4. **CDNåŠ é€Ÿ**: é™æ€èµ„æºCDNéƒ¨ç½²

### ä»£ç ä¼˜åŒ–

```typescript
// ä½¿ç”¨è®¡ç®—å±æ€§ç¼“å­˜å¤æ‚è®¡ç®—
const currentPageBlocks = computed(() => {
  return visualBlocks.value.filter(block => 
    block.pageIndex === pageNum.value - 1
  )
})

// ä½¿ç”¨é˜²æŠ–ä¼˜åŒ–é¢‘ç¹æ“ä½œ
const debouncedUpdateOverlay = debounce(updateOverlayDimensions, 100)
```

## ğŸ”® æœªæ¥æ‰©å±•è®¡åˆ’

### çŸ­æœŸç›®æ ‡ (1-3ä¸ªæœˆ)

- [ ] è‡ªåŠ¨è§†è§‰å—å±‚çº§åˆ’åˆ†ç®—æ³•
- [ ] æ›´å¤šæ‰¹æ³¨ç±»å‹ï¼ˆé«˜äº®ã€ç®­å¤´ã€å›¾å½¢ï¼‰
- [ ] æ‰¹æ³¨å¯¼å‡ºåŠŸèƒ½
- [ ] ç§»åŠ¨ç«¯é€‚é…

### ä¸­æœŸç›®æ ‡ (3-6ä¸ªæœˆ)

- [ ] å¤šç”¨æˆ·åä½œç³»ç»Ÿ
- [ ] å®æ—¶åŒæ­¥åŠŸèƒ½
- [ ] ç‰ˆæœ¬å†å²ç®¡ç†
- [ ] é«˜çº§æœç´¢åŠŸèƒ½

### é•¿æœŸç›®æ ‡ (6-12ä¸ªæœˆ)

- [ ] AIè¾…åŠ©æ‰¹æ³¨
- [ ] è·¨æ–‡æ¡£å…³è”
- [ ] æ’ä»¶ç³»ç»Ÿ
- [ ] ä¼ä¸šçº§åŠŸèƒ½

## ğŸ› ï¸ å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ

```typescript
// ç»„ä»¶å‘½åï¼šPascalCase
export default defineComponent({
  name: 'VisualBlockAnnotator'
})

// å‡½æ•°å‘½åï¼šcamelCase
const convertCoordinates = (bbox: Bbox) => { }

// å¸¸é‡å‘½åï¼šSCREAMING_SNAKE_CASE
const MAX_ZOOM_LEVEL = 5

// æ¥å£å‘½åï¼šPascalCase + Interfaceåç¼€
interface VisualBlockInterface { }
```

### æ–‡ä»¶ç»„ç»‡

```
src/
â”œâ”€â”€ components/        # å¯å¤ç”¨ç»„ä»¶
â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶
â”œâ”€â”€ composables/      # å¯å¤ç”¨é€»è¾‘
â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”œâ”€â”€ types/            # ç±»å‹å®šä¹‰
â””â”€â”€ constants/        # å¸¸é‡å®šä¹‰
```

### Gitå·¥ä½œæµ

```
main              # ä¸»åˆ†æ”¯ï¼Œç”Ÿäº§ç¯å¢ƒ
â”œâ”€â”€ develop       # å¼€å‘åˆ†æ”¯
â”œâ”€â”€ feature/*     # åŠŸèƒ½åˆ†æ”¯
â”œâ”€â”€ bugfix/*      # ä¿®å¤åˆ†æ”¯
â””â”€â”€ release/*     # å‘å¸ƒåˆ†æ”¯
```

## ğŸ“š å­¦ä¹ èµ„æº

### æ ¸å¿ƒæŠ€æœ¯æ–‡æ¡£

- [Nuxt 3 å®˜æ–¹æ–‡æ¡£](https://nuxt.com/docs)
- [Vue 3 å®˜æ–¹æ–‡æ¡£](https://vuejs.org/guide/)
- [Drizzle ORM æ–‡æ¡£](https://orm.drizzle.team/)
- [PDF.js æ–‡æ¡£](https://mozilla.github.io/pdf.js/)

### é¡¹ç›®ç›¸å…³èµ„æº

- [MinerU æ–‡æ¡£](https://mineru.readthedocs.io/)
- [LibSQL æ–‡æ¡£](https://docs.turso.tech/libsql)
- [Cloudflare Pages æ–‡æ¡£](https://developers.cloudflare.com/pages/)

è¿™ä¸ªæ¶æ„æ–‡æ¡£ä¸ºé¡¹ç›®æä¾›äº†å…¨é¢çš„æŠ€æœ¯è§†å›¾ï¼Œæ¶µç›–äº†ä»è®¾è®¡ç†å¿µåˆ°å…·ä½“å®ç°çš„å„ä¸ªæ–¹é¢ï¼Œä¸ºå›¢é˜Ÿå¼€å‘å’Œé¡¹ç›®ç»´æŠ¤æä¾›äº†é‡è¦å‚è€ƒã€‚ 